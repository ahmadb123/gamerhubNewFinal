# spring.application.name=gamerHub
# spring.datasource.url=jdbc:mysql://database-1.chuswo0kiors.us-east-2.rds.amazonaws.com:3306/gamerhubDB
# spring.datasource.username=Gamerhub
# spring.datasource.password=9788107418
# spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
# jwt.secret=qTvOeUJ1QaSgRQhoxMznFUMzP6q09nNEFqlvwVb0Q+s=
# jwt.expiration=86400000
# spring.jpa.hibernate.ddl-auto=update

# # URL Steam should redirect back to after authentication (frontend)
# steam.openid.returnUrl=http://localhost:3000/platform-select

# # URL used as the realm/return_to for OpenID authentication with Steam (backend)
# steam.openid.realm=http://localhost:8080/steam/return
# spring.mvc.dispatch-options-request=true


# # FOR DISCORD OAUTH2 -
 
# discord.client.id=1362087489774289218
# discord.scope=identify email
# discord.redirect.uri=http://localhost:8080/auth/discord/callback
# discord.client.secret="FG1x4sdWTIYaf_2Sa0Yd4SXu7LMEKo9o"

# server.port=8080



# =========================
# Server
# =========================
# Azure sets PORT (and sometimes WEBSITES_PORT) â€“ fall back to 8080 locally
server.port=${PORT:${WEBSITES_PORT:8080}}

# =========================
# DataSource (from App Settings)
# =========================
spring.datasource.url=${SPRING_DATASOURCE_URL}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# Hikari tuning (optional, sane defaults)
spring.datasource.hikari.maximum-pool-size=${DB_MAX_POOL_SIZE:10}
spring.datasource.hikari.minimum-idle=${DB_MIN_IDLE:1}
spring.datasource.hikari.connection-timeout=${DB_CONN_TIMEOUT_MS:30000}
spring.datasource.hikari.idle-timeout=${DB_IDLE_TIMEOUT_MS:600000}
spring.datasource.hikari.max-lifetime=${DB_MAX_LIFETIME_MS:1800000}

# =========================
# JPA / Hibernate
# =========================
spring.jpa.hibernate.ddl-auto=update
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect
spring.jpa.open-in-view=false
spring.sql.init.mode=never
spring.jpa.show-sql=${JPA_SHOW_SQL:false}

# =========================
# JWT (from App Settings)
# =========================
# Use a BASE64-encoded secret >= 256 bits (e.g., openssl rand -base64 48)
jwt.secret=${JWT_SECRET}
jwt.expiration=${JWT_EXPIRATION:86400000}

# =========================
# Third-party OAuth/OpenID
# =========================
# Steam
steam.openid.returnUrl=${STEAM_RETURN_URL:https://purple-flower-07a4ede1e.2.azurestaticapps.net/platform-select}
steam.openid.realm=${STEAM_REALM:https://gamerhub-api-fuhjf2dxdeaqdtgm.azurewebsites.net/steam/return}

Discord
discord.client.id=${DISCORD_CLIENT_ID}
discord.scope=${DISCORD_SCOPE:identify email}
discord.redirect.uri=${DISCORD_REDIRECT_URI:https://gamerhub-api-fuhjf2dxdeaqdtgm.azurewebsites.net/auth/discord/callback}
discord.client.secret=${DISCORD_CLIENT_SECRET}

# =========================
# CORS (front-end origin)
# =========================
spring.web.cors.allowed-origins=${ALLOWED_ORIGINS:https://purple-flower-07a4ede1e.2.azurestaticapps.net}
spring.web.cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS
spring.web.cors.allowed-headers=*
spring.web.cors.allow-credentials=true

# =========================
# Misc
# =========================
spring.mvc.dispatch-options-request=true
logging.level.org.hibernate.SQL=warn
logging.level.org.springframework.web=info
